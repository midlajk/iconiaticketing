<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information Security Incident Report</title>
    <style>
        @page {
            size: A4;
            margin: 1.5cm;
        }
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 100%;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #dc3545;
            padding-bottom: 10px;
        }
        .logo {
            max-height: 80px;
            max-width: 200px;
        }
        .document-title {
            text-align: center;
            color: #dc3545;
            margin: 20px 0;
            font-size: 24px;
        }
        .security-badge {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .section {
            margin-bottom: 30px;
            page-break-inside: avoid;
        }
        .section-title {
            background-color: #f8f9fa;
            padding: 8px 15px;
            border-left: 4px solid #dc3545;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }
        .form-value {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            min-height: 20px;
        }
        .form-value-textarea {
            white-space: pre-wrap;
            min-height: 60px;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
        }
        .col-md-4, .col-md-6, .col-md-8, .col-md-12 {
            position: relative;
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
        }
        @media (min-width: 768px) {
            .col-md-4 {
                flex: 0 0 33.333333%;
                max-width: 33.333333%;
            }
            .col-md-6 {
                flex: 0 0 50%;
                max-width: 50%;
            }
            .col-md-8 {
                flex: 0 0 66.666667%;
                max-width: 66.666667%;
            }
            .col-md-12 {
                flex: 0 0 100%;
                max-width: 100%;
            }
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .card-header {
            background-color: #f8f9fa;
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
        }
        .card-body {
            padding: 15px;
        }
        .footer {
            margin-top: 50px;
            font-size: 12px;
            color: #666;
            text-align: center;
        }
        .notice-box {
            background-color: #f8f9fa;
            border-left: 4px solid #6c757d;
            padding: 15px;
            margin-bottom: 20px;
            font-style: italic;
        }
        .severity-critical {
            color: #dc3545;
            font-weight: bold;
        }
        .severity-high {
            color: #fd7e14;
            font-weight: bold;
        }
        .severity-medium {
            color: #ffc107;
            font-weight: bold;
        }
        .severity-low {
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        {{#if data.logo}}
        <img src="{{data.logo}}" class="logo" alt="Company Logo">
        {{else}}
        <div style="width: 200px;"></div>
        {{/if}}
        <div class="security-badge">SECURITY</div>
    </div>

    <h1 class="document-title">Information Security Incident Report</h1>

    <div class="notice-box">
        The entity is required to utilize the provided form for reporting security incidents to the DoH. 
        Additionally, the entity has the option to tailor the form according to internal requirements for 
        incident reporting and management within the organization.
    </div>

    <!-- Basic Incident Information -->
    <div class="section">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Incident No.</label>
                    <div class="form-value">{{data.formData.data1}}</div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Severity</label>
                    <div class="form-value severity-{{data.lowercase priority}}">{{data.priority}}</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <div class="form-value">{{data.category}}</div>
                </div>
            </div>
            {{#if data.(eq category "Other")}}
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Category (Other)</label>
                    <div class="form-value">{{data.formData.data2}}</div>
                </div>
            </div>
            {{/if}}
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Repetitive Incident</label>
                    <div class="form-value">{{data.formData.data3}}</div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-label">Status of Incident</label>
                    <div class="form-value">{{data.status}}</div>
                </div>
            </div>
        </div>

        {{#if data.(eq formData.data3 "Yes")}}
        <div class="form-group">
            <label class="form-label">Repetitive Incident Comments</label>
            <div class="form-value form-value-textarea">{{data.formData.data4}}</div>
        </div>
        {{/if}}

        <div class="form-group">
            <label class="form-label">Reported by</label>
            <div class="form-value">{{data.formData.data5}}</div>
        </div>

        <div class="form-group">
            <label class="form-label">Description</label>
            <div class="form-value form-value-textarea">{{data.description}}</div>
        </div>
    </div>

    <!-- Incident Details Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Incident Details</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Detected Date & Time</label>
                        <div class="form-value">{{data.formData.data6}}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Reported to DoH Date</label>
                        <div class="form-value">{{data.formData.data7}}</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Closed Date & Time</label>
                        <div class="form-value">{{data.formData.data8}}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Detected Source</label>
                        <div class="form-value">{{data.formData.data9}}</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Affected Systems/Services</label>
                <div class="form-value form-value-textarea">{{data.formData.data10}}</div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Monetary Damage</label>
                        <div class="form-value">${{data.formData.data11}}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Outage Information</label>
                        <div class="form-value">{{data.formData.data12}}</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Business Impact Caused</label>
                <div class="form-value form-value-textarea">{{data.formData.data13}}</div>
            </div>

            <div class="form-group">
                <label class="form-label">Suspected Method</label>
                <div class="form-value form-value-textarea">{{data.formData.data14}}</div>
            </div>

            <div class="form-group">
                <label class="form-label">Summary/Description</label>
                <div class="form-value form-value-textarea">{{data.formData.data15}}</div>
            </div>

            <div class="form-group">
                <label class="form-label">Policies and Procedures</label>
                <div class="form-value form-value-textarea">{{data.formData.data16}}</div>
            </div>

            <div class="form-group">
                <label class="form-label">Reason for Delay</label>
                <div class="form-value form-value-textarea">{{data.formData.data17}}</div>
            </div>
        </div>
    </div>

    <!-- Host/User Identification Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Host/User Identification</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Source User/Name</label>
                        <div class="form-value">{{data.formData.data18}}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">User ID/Email ID</label>
                        <div class="form-value">{{data.formData.data19}}</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Source IP</label>
                        <div class="form-value">{{data.formData.data20}}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Destination IP</label>
                        <div class="form-value">{{data.formData.data21}}</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Destination Domain</label>
                <div class="form-value">{{data.formData.data22}}</div>
            </div>

            <div class="form-group">
                <label class="form-label">Others</label>
                <div class="form-value form-value-textarea">{{data.formData.data23}}</div>
            </div>
        </div>
    </div>

    <!-- Root Cause Analysis Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Root Cause Analysis</h6>
        </div>
        <div class="card-body">
            <div class="form-group">
                <div class="form-value form-value-textarea">{{data.formData.data24}}</div>
            </div>
        </div>
    </div>

    <!-- Containment & Recovery Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Containment & Recovery</h6>
        </div>
        <div class="card-body">
            <div class="form-group">
                <label class="form-label">Containment Measures</label>
                <div class="form-value form-value-textarea">{{data.formData.data25}}</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Recovery Measures</label>
                <div class="form-value form-value-textarea">{{data.formData.data26}}</div>
            </div>
        </div>
    </div>

    <!-- Prevention & Lessons Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Prevention & Lessons</h6>
        </div>
        <div class="card-body">
            <div class="form-group">
                <label class="form-label">Preventive Actions</label>
                <div class="form-value form-value-textarea">{{data.formData.data27}}</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Lesson Learned</label>
                <div class="form-value form-value-textarea">{{data.formData.data28}}</div>
            </div>
        </div>
    </div>

    <!-- Evidence Collections Section -->
    <div class="card">
        <div class="card-header">
            <h6 class="mb-0">Evidence Collections</h6>
        </div>
        <div class="card-body">
            <div class="form-group">
                <label class="form-label">Suspected Email</label>
                <div class="form-value form-value-textarea">{{data.formData.data29}}</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">SIEM Alert</label>
                <div class="form-value form-value-textarea">{{data.formData.data30}}</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Firewall Logs</label>
                <div class="form-value form-value-textarea">{{data.formData.data31}}</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Others</label>
                <div class="form-value form-value-textarea">{{data.formData.data32}}</div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>* Refers for information to be provided to DoH as part of initial Incident notification</p>
        <p>** Refers for the information to be provided to DoH at an appropriate frequency as the investigation unfolds</p>
        <p>*** Refers for the information to be provided to DoH post incident resolution</p>
        <p>Generated on: {{data.currentDate}}</p>
    </div>
</body>
</html>