
<div class="card" id="changeRequestForm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Change Request Form</h5>
      <span class="badge bg-warning">Change</span>
    </div>
    <div class="card-body">
      <form id="ticketForm" enctype="multipart/form-data">
        <!-- Requester Information -->
        <input type="hidden" name="ticketType" value="ChangeRequest">
        <input type="hidden" name="status" value="New">
        <div class="card mb-4">
          <div class="card-header">
            <h6 class="mb-0">Change Requester Information</h6>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="requestorName" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="requestor.name" required>
                <div class="invalid-feedback">Please enter your name.</div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="requestorEmpId" class="form-label">Email</label>
                <input type="email" class="form-control emailInput" id="email" name="requestor.email" required>
                <div class="invalid-feedback">Please enter your Email</div>
              </div>
            </div>
            <div class="row">
               
              <div class="col-md-6 mb-3">
                <label for="requesterEmpId" class="form-label">Change requester employee no.</label>
                <input type="text" class="form-control" id="requesterEmpId" name="formData.data1" placeholder="EMP ID of employee requesting the change" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="changeId" class="form-label">Change ID</label>
                <input type="text" class="form-control" id="changeId" name="formData.data2" placeholder="Change ID number assigned to the change request">
              </div>
            </div>
            <div class="row">
              <!-- <div class="col-md-6 mb-3">
                <label for="requesterName" class="form-label">Change requester employee name</label>
                <input type="text" class="form-control" id="name" name="requestor.name" placeholder="Name of the employee" required>
              </div> -->
              <div class="col-md-6 mb-3">
                <label for="requestDate" class="form-label">Date</label>
                <input type="date" class="form-control" id="requestDate" name="formData.data3" required>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="department" class="form-label">Section/Department</label>
                <input type="text" class="form-control" id="department" name="formData.data4" placeholder="Section/Department of the employee" required>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Change Request Details -->
        <div class="card mb-4">
          <div class="card-header">
            <h6 class="mb-0">Change Request Details</h6>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label for="changeTitle" class="form-label">Title of the change</label>
              <input type="text" class="form-control" id="changeTitle" name="title" placeholder="Clear and concise title of the change being requested" required>
            </div>
            
            <div class="mb-3">
              <label for="changeDescription" class="form-label">Description of change</label>
              <textarea class="form-control" id="changeDescription" name="description" rows="3" placeholder="Brief information about the change being requested" required></textarea>
            </div>
            
            <div class="mb-3">
              <label for="changeReason" class="form-label">Reason for change</label>
              <textarea class="form-control" id="changeReason" name="formData.data5" rows="3" placeholder="Clear and concise explanation of why the change is necessary" required></textarea>
            </div>
            
            <div class="mb-3">
              <label for="service" class="form-label">Service</label>
              <input type="text" class="form-control" id="service" name="formData.data6" placeholder="Service/Process/Technology on which change has to be implemented" required>
            </div>
            
            <div class="mb-3">
              <label for="requesterSignOff" class="form-label">Change requester sign off</label>
              <input type="text" class="form-control" id="requesterSignOff" name="formData.data7" placeholder="Sign off from the change requester">
            </div>
            
            <div class="mb-3">
              <label class="form-label">Change Request Status</label>
              <select class="form-select" id="requestStatus" name="status">
                <option value="Pending" selected>Pending</option>
                <option value="Approved">Approved</option>
                <option value="Rejected">Rejected</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Change Impact Evaluation -->
        <div class="card mb-4">
          <div class="card-header">
            <h6 class="mb-0">Change Impact Evaluation</h6>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label for="infrastructure" class="form-label">Infrastructure</label>
              <textarea class="form-control" id="infrastructure" name="formData.data8" rows="3" placeholder="Potential effects on the existing infrastructure (Application/Network/Database/Security Devices/Server etc.)"></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Type</label>
              <select class="form-select" id="changeType" name="formData.data9">
                <option value="" selected disabled>Select change type...</option>
                <option value="Hardware">Hardware</option>
                <option value="Operating System">Operating System</option>
                <option value="Utilities">Utilities</option>
                <option value="Procedure">Procedure</option>
                <option value="Planned outage">Planned outage</option>
                <option value="Other">Other</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Change Category</label>
              <select class="form-select" id="changeCategory" name="category">
                <option value="Emergency">Emergency</option>
                <option value="Normal" selected>Normal</option>
                <option value="Standard">Standard</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Change Impact</label>
              <select class="form-select" id="changeImpact" name="formData.data10">
                <option value="Minor">Minor</option>
                <option value="Medium" selected>Medium</option>
                <option value="Major">Major</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Change Urgency</label>
              <select class="form-select" id="changeUrgency" name="formData.data11">
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Priority</label>
              <select class="form-select" id="changePriority" name="priority">
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="affectedServices" class="form-label">Affected Services</label>
              <textarea class="form-control" id="affectedServices" name="formData.data12" rows="2" placeholder="Identify the services that may be potentially impacted due to change"></textarea>
            </div>
            
            <div class="mb-3">
              <label for="affectedConfigItems" class="form-label">Affected Configuration Items</label>
              <textarea class="form-control" id="affectedConfigItems" name="formData.data13" rows="2" placeholder="Identify the configuration items that may be impacted as result of the change"></textarea>
            </div>
            
            <div class="mb-3">
              <label for="resourceRequirements" class="form-label">Resource Requirements</label>
              <textarea class="form-control" id="resourceRequirements" name="formData.data14" rows="2" placeholder="Resources (Employee, Hardware, Software) that are required to implement the change"></textarea>
            </div>
            
            <div class="mb-3">
              <label for="financialImpact" class="form-label">Financial Impact</label>
              <textarea class="form-control" id="financialImpact" name="formData.data15" rows="2" placeholder="Total of direct or indirect cost associated with implementing the change"></textarea>
            </div>
            
            <div class="mb-3">
              <label for="rollbackPlan" class="form-label">Rollback Plan Description</label>
              <textarea class="form-control" id="rollbackPlan" name="formData.data16" rows="3" placeholder="Steps to reverse the change that has been made"></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Pre Implementation Testing</label>
              <select class="form-select" id="preImplementationTesting" name="formData.data17">
                <option value="">Select status...</option>
                <option value="Successful">Successful</option>
                <option value="Unsuccessful">Unsuccessful</option>
              </select>
              <textarea class="form-control mt-2" id="testingComments" name="formData.data18" rows="2" placeholder="Comments (if any)"></textarea>
            </div>
          </div>
        </div>
        
        <!-- Change Plan and Schedule -->
        <div class="card mb-4">
          <div class="card-header">
            <h6 class="mb-0">Change Plan and Schedule</h6>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label for="implementationPlan" class="form-label">Implementation Plan Description</label>
              <textarea class="form-control" id="implementationPlan" name="formData.data19" rows="3" placeholder="Steps involved in implementation of the change"></textarea>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="downtimeStart" class="form-label">Downtime Window Start</label>
                <input type="datetime-local" class="form-control" id="downtimeStart" name="formData.data20">
              </div>
              <div class="col-md-6 mb-3">
                <label for="downtimeEnd" class="form-label">Downtime Window End</label>
                <input type="datetime-local" class="form-control" id="downtimeEnd" name="formData.data21">
              </div>
            </div>
            
            <div class="mb-3">
              <label for="approverSignOff" class="form-label">Change Control Committee/Change Advisory Board/Designated Approver Sign off</label>
              <input type="text" class="form-control" id="approverSignOff" name="formData.data22" placeholder="Approval from committee or group responsible for reviewing changes">
            </div>
          </div>
        </div>
        <% if (user) { %>

        <!-- Change Implementation Status -->
        <div class="card mb-4">
          <div class="card-header">
            <h6 class="mb-0">Change Implementation Status</h6>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label class="form-label">Implementation</label>
              <select class="form-select" id="implementationStatus" name="formData.data23">
                <option value="">Select status...</option>
                <option value="Successful">Successful</option>
                <option value="Unsuccessful">Unsuccessful</option>
              </select>
              <textarea class="form-control mt-2" id="implementationComments" name="formData.data24" rows="2" placeholder="Comments (if any)"></textarea>
            </div>
            
            <div class="row">
              <div class="col-md-8 mb-3">
                <label for="implementerSignOff" class="form-label">Implementer Sign off</label>
                <input type="text" class="form-control" id="implementerSignOff" name="formData.data25" placeholder="Sign off from the implementer">
              </div>
              <div class="col-md-4 mb-3">
                <label for="implementationDate" class="form-label">Date</label>
                <input type="date" class="form-control" id="implementationDate" name="formData.data26">
              </div>
            </div>
          </div>
        </div>
        <%}%>
        
        
        <!-- Submit Buttons -->
        
  
 